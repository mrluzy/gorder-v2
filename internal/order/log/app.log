{"message":"waiting for stock grpc client, timeout: 10 seconds","severity":"info","time":"2025-04-25T14:06:17+08:00"}
{"message":"Discovered 1 instance of stock address from consul, addrs:[127.0.0.1:5003]","severity":"info","time":"2025-04-25T14:06:17+08:00"}
{"grpcAddr":"127.0.0.1:5002","message":"registered to consul","serviceName":"order","severity":"info","time":"2025-04-25T14:06:17+08:00"}
{"message":"staring grpc server, listening on 127.0.0.1:5002","severity":"info","time":"2025-04-25T14:06:17+08:00"}
{"args":"{\"customer_id\":\"1234\",\"items\":[{\"id\":\"prod_S8Kcs4H65OdCxg\",\"quantity\":1}]}","from":"127.0.0.1","message":"_request_in","severity":"info","start":1745561187,"time":"2025-04-25T14:06:27+08:00","trace":"00000000000000000000000000000000","uri":"/api/customer/%7BCustomerID%7D/order?CustomerID=1234"}
{"args":"[{\"ID\":\"prod_S8Kcs4H65OdCxg\",\"Quantity\":1}]","cost_ms":651,"message":"_request_success","method":"StockGRPC.CheckIfItemsInStock","response":null,"severity":"info","time":"2025-04-25T14:06:27+08:00","trace":"7a6ac9584f18d22554c2896f078eb02c"}
{"args":"{\"order\":{\"ID\":\"\",\"CustomerID\":\"1234\",\"Status\":\"pending\",\"PaymentLink\":\"\",\"Items\":[{\"ID\":\"prod_S8Kcs4H65OdCxg\",\"Name\":\"Fried Chicken Burger\",\"Quantity\":1,\"PriceID\":\"price_1RE3xECQIkU5HEs5mCwUNKQ5\"}]}}","cost_ms":2,"message":"_request_success","method":"OrderRepositoryMongo.Create","response":null,"severity":"info","time":"2025-04-25T14:06:27+08:00","trace":"7a6ac9584f18d22554c2896f078eb02c"}
{"args":"{\"Channel\":{},\"Routing\":\"direct\",\"Queue\":\"order.created\",\"Exchange\":\"\",\"Body\":{\"ID\":\"680b2663fdd4ab205e8b9fb3\",\"CustomerID\":\"1234\",\"Status\":\"pending\",\"PaymentLink\":\"\",\"Items\":[{\"ID\":\"prod_S8Kcs4H65OdCxg\",\"Name\":\"Fried Chicken Burger\",\"Quantity\":1,\"PriceID\":\"price_1RE3xECQIkU5HEs5mCwUNKQ5\"}]}}","cost_ms":0,"message":"_mq_publish_success","response":null,"severity":"info","time":"2025-04-25T14:06:27+08:00","trace":"7a6ac9584f18d22554c2896f078eb02c"}
{"cmd":{"CustomerID":"1234","Items":[{"ID":"prod_S8Kcs4H65OdCxg","Quantity":1}]},"message":"CreateOrderHandler_command_execute_success","severity":"info","time":"2025-04-25T14:06:27+08:00","trace":"7a6ac9584f18d22554c2896f078eb02c"}
{"command":"CreateOrder","command_body":"{\"CustomerID\":\"1234\",\"Items\":[{\"ID\":\"prod_S8Kcs4H65OdCxg\",\"Quantity\":1}]}","message":"Query executed successfully","severity":"info","time":"2025-04-25T14:06:27+08:00","trace":"7a6ac9584f18d22554c2896f078eb02c"}
{"cost_ms":655,"message":"_request_out","response":"{\"errno\":0,\"message\":\"success\",\"data\":{\"customer_id\":\"1234\",\"order_id\":\"680b2663fdd4ab205e8b9fb3\",\"redirect_url\":\"http://localhost:8282/success?customerID=1234\\u0026orderID=680b2663fdd4ab205e8b9fb3\"},\"trace_id\":\"7a6ac9584f18d22554c2896f078eb02c\"}","severity":"info","time":"2025-04-25T14:06:27+08:00","trace":"00000000000000000000000000000000"}
{"args":"","from":"127.0.0.1","message":"_request_in","severity":"info","start":1745561189,"time":"2025-04-25T14:06:29+08:00","trace":"00000000000000000000000000000000","uri":"/success?customerID=1234\u0026orderID=680b2663fdd4ab205e8b9fb3"}
{"cost_ms":4,"message":"_request_out","response":null,"severity":"info","time":"2025-04-25T14:06:29+08:00","trace":"00000000000000000000000000000000"}
{"args":"","from":"127.0.0.1","message":"_request_in","severity":"info","start":1745561189,"time":"2025-04-25T14:06:29+08:00","trace":"00000000000000000000000000000000","uri":"/api/customer/1234/order/680b2663fdd4ab205e8b9fb3"}
{"args":"{\"customerID\":\"1234\",\"id\":\"680b2663fdd4ab205e8b9fb3\"}","cost_ms":7,"message":"_request_success","method":"OrderRepositoryMongo.Get","response":null,"severity":"info","time":"2025-04-25T14:06:29+08:00","trace":"8d7afb94157b39f9fa4a5a6b6bec440d"}
{"message":"Query executed successfully","query":"GetCustomerOrder","query_body":"{\"CustomerID\":\"1234\",\"OrderID\":\"680b2663fdd4ab205e8b9fb3\"}","severity":"info","time":"2025-04-25T14:06:29+08:00","trace":"8d7afb94157b39f9fa4a5a6b6bec440d"}
{"cost_ms":8,"message":"_request_out","response":"{\"errno\":0,\"message\":\"success\",\"data\":{\"order\":{\"customer_id\":\"1234\",\"id\":\"680b2663fdd4ab205e8b9fb3\",\"items\":[{\"id\":\"prod_S8Kcs4H65OdCxg\",\"name\":\"Fried Chicken Burger\",\"price_id\":\"price_1RE3xECQIkU5HEs5mCwUNKQ5\",\"quantity\":1}],\"payment_link\":\"\",\"status\":\"pending\"}},\"trace_id\":\"8d7afb94157b39f9fa4a5a6b6bec440d\"}","severity":"info","time":"2025-04-25T14:06:29+08:00","trace":"00000000000000000000000000000000"}
{"args":{"ID":"680b2663fdd4ab205e8b9fb3","CustomerID":"1234","Status":"waiting_for_payment","Items":[{"ID":"prod_S8Kcs4H65OdCxg","Name":"Fried Chicken Burger","Quantity":1,"PriceID":"price_1RE3xECQIkU5HEs5mCwUNKQ5"}],"PaymentLink":"https://checkout.stripe.com/c/pay/cs_test_a117gcbuVtkdPZ9zT2YTB56WloYX5ice3AYQ5P1yxzvbJFgF0zzMtWogPt#fidkdWxOYHwnPyd1blpxYHZxWjA0V0A2dTFGVExuUDBNQHYwTW5IMW5dYkxVd0p2REBvPE92RGlUVD1mQz1uUUxzcnNnUFJiY2tdQXxnU213XTJtaGxPTUFMPVRuUkFUczZTPWlncld9bD0yNTVMRmx0YUdrUScpJ2N3amhWYHdzYHcnP3F3cGApJ2lkfGpwcVF8dWAnPyd2bGtiaWBabHFgaCcpJ2BrZGdpYFVpZGZgbWppYWB3dic%2FcXdwYHgl"},"grpc_metadata":{":authority":["127.0.0.1:5002"],"content-type":["application/grpc"],"traceparent":["00-7a6ac9584f18d22554c2896f078eb02c-6d41e25dac72bcb4-01"],"user-agent":["grpc-go/1.71.0"],"x-b3-sampled":["1"],"x-b3-spanid":["6d41e25dac72bcb4"],"x-b3-traceid":["7a6ac9584f18d22554c2896f078eb02c"]},"message":"_grpc_request_in","severity":"info","time":"2025-04-25T14:06:33+08:00","trace":"7a6ac9584f18d22554c2896f078eb02c"}
{"args":"{\"customerID\":\"1234\",\"id\":\"680b2663fdd4ab205e8b9fb3\"}","cost_ms":2,"message":"_request_success","method":"OrderRepositoryMongo.Get","response":null,"severity":"info","time":"2025-04-25T14:06:33+08:00","trace":"7a6ac9584f18d22554c2896f078eb02c"}
{"args":"{\"order\":{\"ID\":\"680b2663fdd4ab205e8b9fb3\",\"CustomerID\":\"1234\",\"Status\":\"waiting_for_payment\",\"PaymentLink\":\"https://checkout.stripe.com/c/pay/cs_test_a117gcbuVtkdPZ9zT2YTB56WloYX5ice3AYQ5P1yxzvbJFgF0zzMtWogPt#fidkdWxOYHwnPyd1blpxYHZxWjA0V0A2dTFGVExuUDBNQHYwTW5IMW5dYkxVd0p2REBvPE92RGlUVD1mQz1uUUxzcnNnUFJiY2tdQXxnU213XTJtaGxPTUFMPVRuUkFUczZTPWlncld9bD0yNTVMRmx0YUdrUScpJ2N3amhWYHdzYHcnP3F3cGApJ2lkfGpwcVF8dWAnPyd2bGtiaWBabHFgaCcpJ2BrZGdpYFVpZGZgbWppYWB3dic%2FcXdwYHgl\",\"Items\":[{\"ID\":\"prod_S8Kcs4H65OdCxg\",\"Name\":\"Fried Chicken Burger\",\"Quantity\":1,\"PriceID\":\"price_1RE3xECQIkU5HEs5mCwUNKQ5\"}]}}","cost_ms":4,"message":"_request_success","method":"OrderRepositoryMongo.Update ","response":null,"severity":"info","time":"2025-04-25T14:06:33+08:00","trace":"7a6ac9584f18d22554c2896f078eb02c"}
{"command":"UpdateOrder","command_body":"","message":"Query executed successfully","severity":"info","time":"2025-04-25T14:06:33+08:00","trace":"7a6ac9584f18d22554c2896f078eb02c"}
{"grpc.code":"OK","grpc.method":"UpdateOrder","grpc.service":"orderpb.OrderService","grpc.start_time":"2025-04-25T14:06:33+08:00","grpc.time_ms":5.65,"message":"finished unary call with code OK","peer.address":"127.0.0.1:64634","severity":"info","span.kind":"server","system":"grpc","time":"2025-04-25T14:06:33+08:00","trace":"7a6ac9584f18d22554c2896f078eb02c"}
{"args":"","from":"127.0.0.1","message":"_request_in","severity":"info","start":1745561193,"time":"2025-04-25T14:06:33+08:00","trace":"00000000000000000000000000000000","uri":"/success?customerID=1234\u0026orderID=680b2663fdd4ab205e8b9fb3"}
{"cost_ms":0,"message":"_request_out","response":null,"severity":"info","time":"2025-04-25T14:06:33+08:00","trace":"00000000000000000000000000000000"}
{"args":"","from":"127.0.0.1","message":"_request_in","severity":"info","start":1745561193,"time":"2025-04-25T14:06:33+08:00","trace":"00000000000000000000000000000000","uri":"/api/customer/1234/order/680b2663fdd4ab205e8b9fb3"}
{"args":"{\"customerID\":\"1234\",\"id\":\"680b2663fdd4ab205e8b9fb3\"}","cost_ms":1,"message":"_request_success","method":"OrderRepositoryMongo.Get","response":null,"severity":"info","time":"2025-04-25T14:06:33+08:00","trace":"2ba7fa4db4bf2d707afc803404731d2d"}
{"message":"Query executed successfully","query":"GetCustomerOrder","query_body":"{\"CustomerID\":\"1234\",\"OrderID\":\"680b2663fdd4ab205e8b9fb3\"}","severity":"info","time":"2025-04-25T14:06:33+08:00","trace":"2ba7fa4db4bf2d707afc803404731d2d"}
{"cost_ms":1,"message":"_request_out","response":"{\"errno\":0,\"message\":\"success\",\"data\":{\"order\":{\"customer_id\":\"1234\",\"id\":\"680b2663fdd4ab205e8b9fb3\",\"items\":[{\"id\":\"prod_S8Kcs4H65OdCxg\",\"name\":\"Fried Chicken Burger\",\"price_id\":\"price_1RE3xECQIkU5HEs5mCwUNKQ5\",\"quantity\":1}],\"payment_link\":\"https://checkout.stripe.com/c/pay/cs_test_a117gcbuVtkdPZ9zT2YTB56WloYX5ice3AYQ5P1yxzvbJFgF0zzMtWogPt#fidkdWxOYHwnPyd1blpxYHZxWjA0V0A2dTFGVExuUDBNQHYwTW5IMW5dYkxVd0p2REBvPE92RGlUVD1mQz1uUUxzcnNnUFJiY2tdQXxnU213XTJtaGxPTUFMPVRuUkFUczZTPWlncld9bD0yNTVMRmx0YUdrUScpJ2N3amhWYHdzYHcnP3F3cGApJ2lkfGpwcVF8dWAnPyd2bGtiaWBabHFgaCcpJ2BrZGdpYFVpZGZgbWppYWB3dic%2FcXdwYHgl\",\"status\":\"waiting_for_payment\"}},\"trace_id\":\"2ba7fa4db4bf2d707afc803404731d2d\"}","severity":"info","time":"2025-04-25T14:06:33+08:00","trace":"00000000000000000000000000000000"}
{"args":"{\"customerID\":\"1234\",\"id\":\"680b2663fdd4ab205e8b9fb3\"}","cost_ms":1,"message":"_request_success","method":"OrderRepositoryMongo.Get","response":null,"severity":"info","time":"2025-04-25T14:06:46+08:00","trace":"36f66dbf585c5d0fc53d0245857df3d6"}
{"args":"{\"order\":{\"ID\":\"680b2663fdd4ab205e8b9fb3\",\"CustomerID\":\"1234\",\"Status\":\"paid\",\"PaymentLink\":\"\",\"Items\":[{\"ID\":\"prod_S8Kcs4H65OdCxg\",\"Name\":\"Fried Chicken Burger\",\"Quantity\":1,\"PriceID\":\"price_1RE3xECQIkU5HEs5mCwUNKQ5\"}]}}","cost_ms":2,"message":"_request_success","method":"OrderRepositoryMongo.Update ","response":null,"severity":"info","time":"2025-04-25T14:06:46+08:00","trace":"36f66dbf585c5d0fc53d0245857df3d6"}
{"command":"UpdateOrder","command_body":"","message":"Query executed successfully","severity":"info","time":"2025-04-25T14:06:46+08:00","trace":"36f66dbf585c5d0fc53d0245857df3d6"}
{"message":"consume success","severity":"info","time":"2025-04-25T14:06:46+08:00","trace":"36f66dbf585c5d0fc53d0245857df3d6"}
{"args":"","from":"127.0.0.1","message":"_request_in","severity":"info","start":1745561208,"time":"2025-04-25T14:06:48+08:00","trace":"00000000000000000000000000000000","uri":"/api/customer/1234/order/680b2663fdd4ab205e8b9fb3"}
{"args":"{\"customerID\":\"1234\",\"id\":\"680b2663fdd4ab205e8b9fb3\"}","cost_ms":2,"message":"_request_success","method":"OrderRepositoryMongo.Get","response":null,"severity":"info","time":"2025-04-25T14:06:48+08:00","trace":"579838c6f2dfd8270918a15825b6bd2e"}
{"message":"Query executed successfully","query":"GetCustomerOrder","query_body":"{\"CustomerID\":\"1234\",\"OrderID\":\"680b2663fdd4ab205e8b9fb3\"}","severity":"info","time":"2025-04-25T14:06:48+08:00","trace":"579838c6f2dfd8270918a15825b6bd2e"}
{"cost_ms":3,"message":"_request_out","response":"{\"errno\":0,\"message\":\"success\",\"data\":{\"order\":{\"customer_id\":\"1234\",\"id\":\"680b2663fdd4ab205e8b9fb3\",\"items\":[{\"id\":\"prod_S8Kcs4H65OdCxg\",\"name\":\"Fried Chicken Burger\",\"price_id\":\"price_1RE3xECQIkU5HEs5mCwUNKQ5\",\"quantity\":1}],\"payment_link\":\"https://checkout.stripe.com/c/pay/cs_test_a117gcbuVtkdPZ9zT2YTB56WloYX5ice3AYQ5P1yxzvbJFgF0zzMtWogPt#fidkdWxOYHwnPyd1blpxYHZxWjA0V0A2dTFGVExuUDBNQHYwTW5IMW5dYkxVd0p2REBvPE92RGlUVD1mQz1uUUxzcnNnUFJiY2tdQXxnU213XTJtaGxPTUFMPVRuUkFUczZTPWlncld9bD0yNTVMRmx0YUdrUScpJ2N3amhWYHdzYHcnP3F3cGApJ2lkfGpwcVF8dWAnPyd2bGtiaWBabHFgaCcpJ2BrZGdpYFVpZGZgbWppYWB3dic%2FcXdwYHgl\",\"status\":\"paid\"}},\"trace_id\":\"579838c6f2dfd8270918a15825b6bd2e\"}","severity":"info","time":"2025-04-25T14:06:48+08:00","trace":"00000000000000000000000000000000"}
{"args":{"ID":"680b2663fdd4ab205e8b9fb3","CustomerID":"1234","Status":"ready","Items":[{"ID":"prod_S8Kcs4H65OdCxg","Name":"Fried Chicken Burger","Quantity":1,"PriceID":"price_1RE3xECQIkU5HEs5mCwUNKQ5"}]},"grpc_metadata":{":authority":["127.0.0.1:5002"],"content-type":["application/grpc"],"traceparent":["00-36f66dbf585c5d0fc53d0245857df3d6-7e1caf6c4bcd56e0-01"],"user-agent":["grpc-go/1.71.0"],"x-b3-sampled":["1"],"x-b3-spanid":["7e1caf6c4bcd56e0"],"x-b3-traceid":["36f66dbf585c5d0fc53d0245857df3d6"]},"message":"_grpc_request_in","severity":"info","time":"2025-04-25T14:06:51+08:00","trace":"36f66dbf585c5d0fc53d0245857df3d6"}
{"args":"{\"customerID\":\"1234\",\"id\":\"680b2663fdd4ab205e8b9fb3\"}","cost_ms":1,"message":"_request_success","method":"OrderRepositoryMongo.Get","response":null,"severity":"info","time":"2025-04-25T14:06:51+08:00","trace":"36f66dbf585c5d0fc53d0245857df3d6"}
{"args":"{\"order\":{\"ID\":\"680b2663fdd4ab205e8b9fb3\",\"CustomerID\":\"1234\",\"Status\":\"ready\",\"PaymentLink\":\"\",\"Items\":[{\"ID\":\"prod_S8Kcs4H65OdCxg\",\"Name\":\"Fried Chicken Burger\",\"Quantity\":1,\"PriceID\":\"price_1RE3xECQIkU5HEs5mCwUNKQ5\"}]}}","cost_ms":2,"message":"_request_success","method":"OrderRepositoryMongo.Update ","response":null,"severity":"info","time":"2025-04-25T14:06:51+08:00","trace":"36f66dbf585c5d0fc53d0245857df3d6"}
{"command":"UpdateOrder","command_body":"","message":"Query executed successfully","severity":"info","time":"2025-04-25T14:06:51+08:00","trace":"36f66dbf585c5d0fc53d0245857df3d6"}
{"grpc.code":"OK","grpc.method":"UpdateOrder","grpc.service":"orderpb.OrderService","grpc.start_time":"2025-04-25T14:06:51+08:00","grpc.time_ms":2.792,"message":"finished unary call with code OK","peer.address":"127.0.0.1:64793","severity":"info","span.kind":"server","system":"grpc","time":"2025-04-25T14:06:51+08:00","trace":"36f66dbf585c5d0fc53d0245857df3d6"}
{"args":"","from":"127.0.0.1","message":"_request_in","severity":"info","start":1745561213,"time":"2025-04-25T14:06:53+08:00","trace":"00000000000000000000000000000000","uri":"/api/customer/1234/order/680b2663fdd4ab205e8b9fb3"}
{"args":"{\"customerID\":\"1234\",\"id\":\"680b2663fdd4ab205e8b9fb3\"}","cost_ms":1,"message":"_request_success","method":"OrderRepositoryMongo.Get","response":null,"severity":"info","time":"2025-04-25T14:06:53+08:00","trace":"842c9232cdb3ee7c431e6e0b650111ca"}
{"message":"Query executed successfully","query":"GetCustomerOrder","query_body":"{\"CustomerID\":\"1234\",\"OrderID\":\"680b2663fdd4ab205e8b9fb3\"}","severity":"info","time":"2025-04-25T14:06:53+08:00","trace":"842c9232cdb3ee7c431e6e0b650111ca"}
{"cost_ms":1,"message":"_request_out","response":"{\"errno\":0,\"message\":\"success\",\"data\":{\"order\":{\"customer_id\":\"1234\",\"id\":\"680b2663fdd4ab205e8b9fb3\",\"items\":[{\"id\":\"prod_S8Kcs4H65OdCxg\",\"name\":\"Fried Chicken Burger\",\"price_id\":\"price_1RE3xECQIkU5HEs5mCwUNKQ5\",\"quantity\":1}],\"payment_link\":\"\",\"status\":\"ready\"}},\"trace_id\":\"842c9232cdb3ee7c431e6e0b650111ca\"}","severity":"info","time":"2025-04-25T14:06:53+08:00","trace":"00000000000000000000000000000000"}
